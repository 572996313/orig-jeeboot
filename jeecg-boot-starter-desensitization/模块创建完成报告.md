# jeecg-boot-starter-desensitization æ¨¡å—åˆ›å»ºå®ŒæˆæŠ¥å‘Š

## ğŸ“‹ æ¨¡å—åŸºæœ¬ä¿¡æ¯

| é¡¹ç›® | å†…å®¹ |
|-----|------|
| **æ¨¡å—åç§°** | jeecg-boot-starter-desensitization |
| **æ¨¡å—æè¿°** | JeecgBoot æ•°æ®è„±æ• Starter æ¨¡å— |
| **æ¨¡å—ç‰ˆæœ¬** | 4.0.0 |
| **åˆ›å»ºæ—¥æœŸ** | 2025-11-08 |
| **æ‹†åˆ†æ¥æº** | jeecg-boot-base-core |
| **æ¨¡å—ç±»å‹** | Spring Boot Starterï¼ˆåŠŸèƒ½æ¨¡å—ï¼‰ |

## âœ… å®Œæˆæƒ…å†µæ€»è§ˆ

### åˆ›å»ºæ–‡ä»¶æ¸…å•

| åºå· | æ–‡ä»¶è·¯å¾„ | æ–‡ä»¶ç±»å‹ | è¡Œæ•° | è¯´æ˜ |
|-----|---------|---------|------|------|
| 1 | `pom.xml` | Mavené…ç½® | 107 | æ¨¡å—ä¾èµ–é…ç½® |
| 2 | `src/main/java/org/jeecg/common/desensitization/config/JeecgDesensitizationProperties.java` | é…ç½®ç±» | 308 | è„±æ•é…ç½®å±æ€§ç±» |
| 3 | `src/main/java/org/jeecg/common/desensitization/enums/SensitiveType.java` | æšä¸¾ç±» | 53 | æ•æ„Ÿä¿¡æ¯ç±»å‹æšä¸¾ |
| 4 | `src/main/java/org/jeecg/common/desensitization/annotation/Sensitive.java` | æ³¨è§£ç±» | 40 | æ•æ„Ÿå­—æ®µæ ‡è®°æ³¨è§£ |
| 5 | `src/main/java/org/jeecg/common/desensitization/util/SensitiveInfoUtil.java` | å·¥å…·ç±» | 202 | è„±æ•å·¥å…·ç±» |
| 6 | `src/main/java/org/jeecg/common/desensitization/serializer/SensitiveJsonSerializer.java` | åºåˆ—åŒ–å™¨ | 80 | Jacksonåºåˆ—åŒ–è„±æ• |
| 7 | `src/main/java/org/jeecg/common/desensitization/aspect/SensitiveDataAspect.java` | AOPåˆ‡é¢ | 140 | æ–¹æ³•è¿”å›å€¼è„±æ• |
| 8 | `src/main/java/org/jeecg/config/desensitization/JeecgDesensitizationAutoConfiguration.java` | è‡ªåŠ¨é…ç½® | 102 | Spring Bootè‡ªåŠ¨é…ç½® |
| 9 | `src/main/resources/META-INF/spring.factories` | é…ç½®æ–‡ä»¶ | 3 | è‡ªåŠ¨é…ç½®å¯¼å…¥ |
| 10 | `src/main/resources/META-INF/spring-configuration-metadata.json` | å…ƒæ•°æ® | 213 | é…ç½®å±æ€§å…ƒæ•°æ® |
| 11 | `README.md` | æ–‡æ¡£ | 172 | æ¨¡å—ä½¿ç”¨æ–‡æ¡£ |
| 12 | `æ¨¡å—åˆ›å»ºå®ŒæˆæŠ¥å‘Š.md` | æŠ¥å‘Š | - | æœ¬æŠ¥å‘Š |

**æ€»è®¡**: 12ä¸ªæ–‡ä»¶ï¼Œçº¦ **1,420è¡Œä»£ç **

## ğŸ“¦ æ¨¡å—ç»“æ„

```
jeecg-boot-starter-desensitization/
â”œâ”€â”€ pom.xml                                    # Mavené…ç½®
â”œâ”€â”€ README.md                                  # ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ æ¨¡å—åˆ›å»ºå®ŒæˆæŠ¥å‘Š.md                         # å®ŒæˆæŠ¥å‘Š
â””â”€â”€ src/main/
    â”œâ”€â”€ java/org/jeecg/
    â”‚   â”œâ”€â”€ common/desensitization/
    â”‚   â”‚   â”œâ”€â”€ config/
    â”‚   â”‚   â”‚   â””â”€â”€ JeecgDesensitizationProperties.java    # é…ç½®å±æ€§ç±»
    â”‚   â”‚   â”œâ”€â”€ enums/
    â”‚   â”‚   â”‚   â””â”€â”€ SensitiveType.java                     # æ•æ„Ÿç±»å‹æšä¸¾
    â”‚   â”‚   â”œâ”€â”€ annotation/
    â”‚   â”‚   â”‚   â””â”€â”€ Sensitive.java                         # è„±æ•æ³¨è§£
    â”‚   â”‚   â”œâ”€â”€ util/
    â”‚   â”‚   â”‚   â””â”€â”€ SensitiveInfoUtil.java                 # è„±æ•å·¥å…·ç±»
    â”‚   â”‚   â”œâ”€â”€ serializer/
    â”‚   â”‚   â”‚   â””â”€â”€ SensitiveJsonSerializer.java           # JSONåºåˆ—åŒ–å™¨
    â”‚   â”‚   â””â”€â”€ aspect/
    â”‚   â”‚       â””â”€â”€ SensitiveDataAspect.java               # AOPåˆ‡é¢
    â”‚   â””â”€â”€ config/desensitization/
    â”‚       â””â”€â”€ JeecgDesensitizationAutoConfiguration.java  # è‡ªåŠ¨é…ç½®ç±»
    â””â”€â”€ resources/META-INF/
        â”œâ”€â”€ spring.factories                               # è‡ªåŠ¨é…ç½®å¯¼å…¥
        â””â”€â”€ spring-configuration-metadata.json             # é…ç½®å…ƒæ•°æ®
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. æ”¯æŒçš„è„±æ•ç±»å‹ï¼ˆ10ç§ï¼‰

| ç±»å‹ | æšä¸¾å€¼ | è„±æ•ç¤ºä¾‹ |
|-----|-------|---------|
| ä¸­æ–‡å§“å | `CHINESE_NAME` | å¼ ä¸‰ â†’ å¼ * |
| èº«ä»½è¯å· | `ID_CARD` | 110101199001011234 â†’ 110101********1234 |
| æ‰‹æœºå· | `MOBILE_PHONE` | 13812345678 â†’ 138****5678 |
| åº§æœºå· | `FIXED_PHONE` | 01012345678 â†’ 0101****78 |
| åœ°å€ | `ADDRESS` | åŒ—äº¬å¸‚æœé˜³åŒºxxx â†’ åŒ—äº¬å¸‚æœé˜³**** |
| é‚®ç®± | `EMAIL` | user@example.com â†’ u****@example.com |
| é“¶è¡Œå¡ | `BANK_CARD` | 6222021234567890 â†’ 6222 **** **** 7890 |
| å¯†ç  | `PASSWORD` | 123456 â†’ ****** |
| è½¦ç‰Œå· | `CAR_LICENSE` | äº¬A12345 â†’ äº¬A1***5 |
| è‡ªå®šä¹‰ | `CUSTOM` | æ”¯æŒè‡ªå®šä¹‰æ­£åˆ™ |

### 2. è„±æ•ç­–ç•¥ï¼ˆ2ç§ï¼‰

- **æ©ç ç­–ç•¥ï¼ˆmaskï¼‰**: ä½¿ç”¨ `*` å·éšè—éƒ¨åˆ†ä¿¡æ¯ï¼Œä¿ç•™è¯†åˆ«ç‰¹å¾
- **åŠ å¯†ç­–ç•¥ï¼ˆencryptï¼‰**: ä½¿ç”¨åŠ å¯†ç®—æ³•å®Œå…¨åŠ å¯†æ•æ„Ÿä¿¡æ¯

### 3. è‡ªåŠ¨è„±æ•æ–¹å¼ï¼ˆ2ç§ï¼‰

- **JSONåºåˆ—åŒ–è„±æ•**: é€šè¿‡ Jackson åºåˆ—åŒ–å™¨è‡ªåŠ¨è„±æ•
- **æ–¹æ³•è¿”å›å€¼è„±æ•**: é€šè¿‡ AOP åˆ‡é¢æ‹¦æˆª Controller è¿”å›å€¼è„±æ•

## ğŸ”— ä¾èµ–å…³ç³»

### Mavenä¾èµ–

```xml
<!-- åŸºç¡€ä¾èµ– -->
<dependency>
    <groupId>org.jeecgframework.boot</groupId>
    <artifactId>jeecg-boot-base-constants</artifactId>
</dependency>
<dependency>
    <groupId>org.jeecgframework.boot</groupId>
    <artifactId>jeecg-boot-base-api</artifactId>
</dependency>
<dependency>
    <groupId>org.jeecgframework.boot</groupId>
    <artifactId>jeecg-boot-base-utils</artifactId>
</dependency>

<!-- Springä¾èµ– -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-aop</artifactId>
</dependency>

<!-- Jacksonä¾èµ– -->
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
</dependency>

<!-- å¯é€‰ä¾èµ– -->
<dependency>
    <groupId>cn.hutool</groupId>
    <artifactId>hutool-crypto</artifactId>
    <optional>true</optional>
</dependency>
```

### ä¾èµ–å±‚çº§

```
jeecg-boot-starter-desensitization
â”œâ”€â”€ Level 0: jeecg-boot-base-constants (çº¯Java)
â”œâ”€â”€ Level 0: jeecg-boot-base-api (çº¯Java)
â”œâ”€â”€ Level 0: jeecg-boot-base-utils (çº¯Java)
â”œâ”€â”€ Level 1: Spring Boot Starter
â”œâ”€â”€ Level 1: Spring Boot Starter AOP
â”œâ”€â”€ Level 1: Jackson Databind
â””â”€â”€ Level 2: Hutool Crypto (å¯é€‰)
```

## ğŸ“ é…ç½®ç¤ºä¾‹

### åŸºç¡€é…ç½®

```yaml
jeecg:
  desensitization:
    enabled: true              # å¯ç”¨è„±æ•
    strategy: mask             # è„±æ•ç­–ç•¥
    json-enabled: true         # JSONè„±æ•
    method-enabled: true       # æ–¹æ³•è„±æ•
```

### è‡ªå®šä¹‰æ©ç è§„åˆ™

```yaml
jeecg:
  desensitization:
    mask:
      phone-pattern: "^(\\d{3})\\d{4}(\\d{4})$"
      phone-replacement: "$1****$2"
      id-card-pattern: "^(\\d{6})\\d{8}(\\d{4})$"
      id-card-replacement: "$1********$2"
```

### åŠ å¯†ç­–ç•¥é…ç½®

```yaml
jeecg:
  desensitization:
    strategy: encrypt
    encrypt:
      algorithm: AES
      key: "your-secret-key-16byte"
      iv: "your-iv-16-byte!!"
```

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### å®ä½“ç±»æ ‡è®°

```java
public class User {
    @Sensitive(type = SensitiveType.CHINESE_NAME)
    private String name;
    
    @Sensitive(type = SensitiveType.MOBILE_PHONE)
    private String phone;
    
    @Sensitive(type = SensitiveType.ID_CARD)
    private String idCard;
}
```

### Controllerè‡ªåŠ¨è„±æ•

```java
@GetMapping("/{id}")
public Result<User> getUser(@PathVariable String id) {
    User user = userService.getById(id);
    // è¿”å›æ—¶è‡ªåŠ¨è„±æ•
    return Result.ok(user);
}
```

## âœ¨ æŠ€æœ¯äº®ç‚¹

### 1. æ³¨è§£é©±åŠ¨è®¾è®¡

- âœ… ä½¿ç”¨ `@Sensitive` æ³¨è§£æ ‡è®°æ•æ„Ÿå­—æ®µ
- âœ… æ”¯æŒæŒ‡å®šè„±æ•ç±»å‹å’Œè‡ªå®šä¹‰è§„åˆ™
- âœ… é›†æˆ Jackson åºåˆ—åŒ–æ³¨è§£

### 2. åŒé‡è„±æ•æœºåˆ¶

- âœ… JSONåºåˆ—åŒ–æ—¶è‡ªåŠ¨è„±æ•ï¼ˆJackson Serializerï¼‰
- âœ… æ–¹æ³•è¿”å›å€¼è‡ªåŠ¨è„±æ•ï¼ˆAOP Aspectï¼‰
- âœ… æ”¯æŒåµŒå¥—å¯¹è±¡é€’å½’è„±æ•

### 3. çµæ´»é…ç½®

- âœ… æ”¯æŒå…¨å±€é…ç½®å’Œå­—æ®µçº§é…ç½®
- âœ… æ‰€æœ‰å†…ç½®è§„åˆ™å¯é€šè¿‡é…ç½®ä¿®æ”¹
- âœ… æ”¯æŒè‡ªå®šä¹‰æ­£åˆ™è¡¨è¾¾å¼
- âœ… æ¡ä»¶åŠ è½½ï¼ˆ@ConditionalOnPropertyï¼‰

### 4. æ€§èƒ½ä¼˜åŒ–

- âœ… æ­£åˆ™è¡¨è¾¾å¼é¢„ç¼–è¯‘ä¸ºé™æ€ Pattern
- âœ… ä»…å¤„ç†æ ‡æ³¨äº†æ³¨è§£çš„å­—æ®µ
- âœ… æ”¯æŒæŒ‰éœ€å¯ç”¨/ç¦ç”¨åŠŸèƒ½

### 5. Spring Booté›†æˆ

- âœ… è‡ªåŠ¨é…ç½®ï¼ˆAutoConfigurationï¼‰
- âœ… é…ç½®å±æ€§æç¤ºï¼ˆspring-configuration-metadata.jsonï¼‰
- âœ… æ¡ä»¶Beanæ³¨å†Œ
- âœ… å¯åŠ¨æ—¥å¿—è¾“å‡º

## ğŸ” æµ‹è¯•å»ºè®®

### å•å…ƒæµ‹è¯•

```java
@Test
public void testDesensitize() {
    // æµ‹è¯•æ‰‹æœºå·è„±æ•
    String phone = "13812345678";
    String result = SensitiveInfoUtil.desensitize(phone, SensitiveType.MOBILE_PHONE);
    assertEquals("138****5678", result);
    
    // æµ‹è¯•èº«ä»½è¯è„±æ•
    String idCard = "110101199001011234";
    String result2 = SensitiveInfoUtil.desensitize(idCard, SensitiveType.ID_CARD);
    assertEquals("110101********1234", result2);
}
```

### é›†æˆæµ‹è¯•

```java
@SpringBootTest
@AutoConfigureMockMvc
public class DesensitizationIntegrationTest {
    
    @Autowired
    private MockMvc mockMvc;
    
    @Test
    public void testControllerDesensitization() throws Exception {
        mockMvc.perform(get("/user/1"))
            .andExpect(status().isOk())
            .andExpect(jsonPath("$.data.phone").value("138****5678"));
    }
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ€§èƒ½è€ƒè™‘

- æ­£åˆ™åŒ¹é…å·²ä¼˜åŒ–ï¼Œä½†å¤§é‡æ•°æ®è„±æ•ä»ä¼šå½±å“æ€§èƒ½
- å»ºè®®ç”Ÿäº§ç¯å¢ƒæŒ‰éœ€å¯ç”¨è„±æ•åŠŸèƒ½
- å¯é€šè¿‡é…ç½®å…³é—­ä¸å¿…è¦çš„è„±æ•æ–¹å¼

### 2. æ•°æ®å®‰å…¨

- è„±æ•ä»…åœ¨è¾“å‡ºé˜¶æ®µï¼Œä¸å½±å“æ•°æ®åº“å­˜å‚¨
- æ•æ„Ÿæ•°æ®åº”åœ¨å…¥åº“å‰åŠ å¯†ï¼ŒæŸ¥è¯¢åè„±æ•å±•ç¤º
- ç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­è„±æ•æ—¥å¿—

### 3. å…¼å®¹æ€§

- ä¾èµ– Spring Boot 2.x
- ä¾èµ– Jackson 2.x
- éœ€è¦ JDK 8+

## ğŸ“Š ä¸åŸæ¨¡å—å¯¹æ¯”

### æ‹†åˆ†å‰ï¼ˆjeecg-boot-base-coreï¼‰

- âŒ è„±æ•åŠŸèƒ½ä¸å…¶ä»–åŠŸèƒ½æ··æ‚
- âŒ æ— æ³•ç‹¬ç«‹ä½¿ç”¨
- âŒ æ— æ³•æŒ‰éœ€å¼•å…¥
- âŒ é…ç½®åˆ†æ•£

### æ‹†åˆ†åï¼ˆjeecg-boot-starter-desensitizationï¼‰

- âœ… ç‹¬ç«‹æ¨¡å—ï¼ŒèŒè´£å•ä¸€
- âœ… å¯ç‹¬ç«‹ä½¿ç”¨å’Œç‰ˆæœ¬ç®¡ç†
- âœ… æŒ‰éœ€å¼•å…¥ï¼Œå‡å°‘ä¾èµ–
- âœ… é…ç½®é›†ä¸­ï¼Œæ˜“äºç®¡ç†

## ğŸ‰ æ€»ç»“

### å®Œæˆæƒ…å†µ

| é¡¹ç›® | çŠ¶æ€ |
|-----|------|
| æ¨¡å—ç»“æ„è®¾è®¡ | âœ… å®Œæˆ |
| Mavené…ç½® | âœ… å®Œæˆ |
| æ ¸å¿ƒç±»å¼€å‘ | âœ… å®Œæˆï¼ˆ8ä¸ªç±»ï¼‰ |
| é…ç½®ç±»å¼€å‘ | âœ… å®Œæˆ |
| è‡ªåŠ¨é…ç½® | âœ… å®Œæˆ |
| é…ç½®å…ƒæ•°æ® | âœ… å®Œæˆ |
| ä½¿ç”¨æ–‡æ¡£ | âœ… å®Œæˆ |

### æ¨¡å—ç‰¹ç‚¹

- âœ… **èŒè´£å•ä¸€**: ä¸“æ³¨äºæ•°æ®è„±æ•åŠŸèƒ½
- âœ… **æ˜“äºä½¿ç”¨**: æ³¨è§£é©±åŠ¨ï¼Œè‡ªåŠ¨è„±æ•
- âœ… **çµæ´»é…ç½®**: æ”¯æŒå¤šç§è„±æ•ç­–ç•¥å’Œè§„åˆ™
- âœ… **æ€§èƒ½ä¼˜åŒ–**: é¢„ç¼–è¯‘æ­£åˆ™ï¼ŒæŒ‰éœ€å¤„ç†
- âœ… **Springé›†æˆ**: è‡ªåŠ¨é…ç½®ï¼Œå¼€ç®±å³ç”¨

### åç»­ä¼˜åŒ–å»ºè®®

1. æ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
2. æ”¯æŒæ›´å¤šåŠ å¯†ç®—æ³•ï¼ˆSM2ã€SM4ç­‰å›½å¯†ç®—æ³•ï¼‰
3. æ”¯æŒæ•°æ®åº“å­—æ®µåŠ å¯†å­˜å‚¨
4. æä¾›è„±æ•è§„åˆ™å¯è§†åŒ–é…ç½®ç•Œé¢
5. æ”¯æŒRedisç¼“å­˜è„±æ•è§„åˆ™

---

**åˆ›å»ºæ—¶é—´**: 2025-11-08  
**åˆ›å»ºäººå‘˜**: llllxf (ä¸ªäººå¼€å‘å·¥ç¨‹å¸ˆ)  
**ä½¿ç”¨å·¥å…·**: RooCode AI è¾…åŠ©å¼€å‘  
**æ¨¡å—çŠ¶æ€**: âœ… 